<WindowManager>:
    id: manager
    Login:
    Signup:
    Dashboard:
    Journal:
    JournalEntry:
    ChatBot:
    ChosenPlan:
    Progress:
<Login>:
    name: "login"
    username : username
    password : password
    MDFloatLayout:
        md_bg_color: 1, 1, 1, 1
        Image:
            source: "images\logo.png"
            size: 1,1
            pos_hint : {"center_x": 0.5, "center_y": 0.8}
        MDFloatLayout:
            size_hint: .15, .08
            pos_hint :{"center_x":0.5, "center_y":0.2}
            canvas:
                Color:
                    rgba: [219/255, 158/255, 229/255, 1]
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius : [25, 25, 25, 25]
            Button:
                id: login
                text : ""
                pos_hint : {"center_x":0.5, "center_y":0.2}
                background_color: 0,0,0,0
                on_press: root.login_user()
                

        MDLabel:
            text: "Log In"
            halign : "center"
            pos_hint : {"center_y":0.2}
            color: 0, 0, 0, 1
            font_name : "fonts\BarlowCondensed-Regular.ttf"
            font_size : "18sp"

        MDTextButton:
            text: "Sign Up?"
            halign : "center"
            pos_hint : {"center_y":0.1}
            color: 164/255, 118/255, 171/255, 1
            font_name : "fonts\BarlowCondensed-Regular.ttf"
            font_size : "18sp"
            pos_hint: {"center_x":0.5, "center_y": 0.1}
            underline : True
            on_release:
                root.manager.transition.direction = "left"
                root.manager.current = "signup"
            
                

    MDTextField:
        id: username
        hint_text: "Username"
        color_mode: 'custom'
        line_color_focus: 1, 0, 1, 1
        line_color_normal: 1, 0, 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        size_hint: 0.5, 0.1


    MDTextField:
        id: password
        hint_text : "Password"
        color_mode : 'custom'
        line_color_focus : 1, 0, 1, 1
        line_color_normal : 1, 0, 1, 1
        pos_hint : {"center_x":0.5, "center_y":0.4}
        size_hint : 0.5, 0.1
        password : True   

            
<SignUp>:
    name : "signup"
    MDFloatLayout:
        md_bg_color : 1, 1, 1, 1
        Image:
            source: "images\profile.png"
            size_hint: 0.2, 1
            pos_hint : {"center_x": 0.5, "center_y": 0.9}
        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.1, "center_y": 0.9}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "login"
        MDFloatLayout:
            size_hint: 0.15, 0.08
            pos_hint :{"center_x":0.5, "center_y":0.2}
            canvas:
                Color:
                    rgba: [164/255, 118/255, 171/255, 1]
            
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius : [25, 25, 25, 25]


        Button:
            id: signup
            text : ""
            background_color : 0, 0, 0, 0
            pos_hint :{"center_x": 0.5, "center_y": 0.2}
            on_press:root.signup_user()
            
        
        MDLabel:
            text: "Sign Up"
            halign : "center"
            pos_hint : {"center_y":0.2}
            color: 0, 0, 0, 1
            font_name : "fonts\BarlowCondensed-Regular.ttf"
            font_size : "18sp"

    MDTextField:
        id: name
        hint_text : "Name"
        color_mode : 'custom'
        line_color_focus : 1, 0, 1, 1
        line_color_normal : 1, 0, 1, 1
        pos_hint : {"center_x":0.5, "center_y":0.7}
        size_hint: 0.5, 0.1

    MDTextField:
        id: username
        hint_text : "Username"
        color_mode : 'custom'
        required : True
        line_color_focus : 1, 0, 1, 1
        line_color_normal : 1, 0, 1, 1
        pos_hint : {"center_x":0.5, "center_y":0.6}
        size_hint: 0.5, 0.1
    MDTextField:
        id: password
        hint_text : "Password"
        color_mode : 'custom'
        required : True
        line_color_focus : 1, 0, 1, 1
        line_color_normal : 1, 0, 1, 1
        pos_hint : {"center_x":0.5, "center_y":0.5}
        size_hint: 0.5, 0.1
        password : True
    MDTextField:
        id: confirmpass
        hint_text : "Confirm Password"
        color_mode : 'custom'
        required : True
        line_color_focus : 1, 0, 1, 1
        line_color_normal : 1, 0, 1, 1
        pos_hint : {"center_x":0.5, "center_y":0.4}
        size_hint: 0.5, 0.1
        password : True

        
            
<Dashboard>:
    name: "dashboard"
    MDFloatLayout:
        md_bg_color : 190/255, 81/255, 217/255, 0.55
        Image:
            source : "images\dashlogo.png"
            size: 0.28, 0.7 
            pos_hint : {"center_x": 0.2, "center_y": 0.9}

        Label:
            text : "Recommended Plans"
            halign : "left"
            pos_hint : {"center_x":0.15,"center_y": 0.8}
            color : 0, 0, 0, 1
            font_size: "18sp"
            font_name : "fonts\RedHatDisplay-Regular.ttf"        

        MDTextButton:
            id: myplans
            text: "View chosen plans"
            color: 60/255, 17/255, 76/255, 0.55
            halign: "center"
            pos_hint:{"center_x":0.8, "center_y":0.8}
            underline: True
            on_release:
                root.manager.transition.direction = "left"
                root.manager.current = "plans"


        MDFloatLayout:
            md_bg_color:1,1,1,1
            size_hint:1, 0.18
            pos_hint:{"center_y": 0.05}

        MDIconButton:
            icon: "logout"
            pos_hint:{"center_x": 0.1, "center_y":0.075}
            theme_text_color : "Custom"
            text_color : 140/255, 35/255, 205/255, 1
            on_release: 
                root.manager.get_screen('login').ids.username.text = ''
                root.manager.get_screen('login').ids.password.text = ''
                root.manager.transition.direction = "right"
                root.manager.current = "login"

        Label:
            text: "Logout"
            pos_hint: {"center_x": 0.1, "center_y":0.04}
            halign : "left"
            color: 0, 0, 0, 1
        

        MDIconButton:
            icon: "microphone"
            pos_hint: {"center_x": 0.5, "center_y":0.075}
            theme_text_color : "Custom"
            text_color : 140/255, 35/255, 205/255, 1
            on_release:
                root.manager.transition.direction = "left"
                root.manager.current = "chat"

        Label:
            text: "Talk it out"
            pos_hint: {"center_x": 0.5, "center_y":0.04}
            halign : "left"
            color: 0, 0, 0, 1
        

        MDIconButton:
            icon: "book"
            pos_hint : {"center_x": 0.9, "center_y":0.075}
            theme_text_color : "Custom"
            text_color : 140/255, 35/255, 205/255, 1
            on_release:
                root.manager.transition.direction = "left"
                root.manager.current = "journal"

        Label:
            text: "Journal"
            pos_hint: {"center_x": 0.9, "center_y":0.04}
            halign : "left"
            color: 0, 0, 0, 1

    ScrollView:
        size_hint_y: 0.62
        pos_hint:{"x": 0.2, "y": 0.15}
        do_scroll_x: False
        do_scroll_y: True
        GridLayout:
            id:reclist
            size:(root.width, root.height)
            height:self.minimum_height
            size_hint: None, None
            pos_hint: {"top":4}
            padding: 16
            spacing: 5
            cols: 2
                  

<Journal>:
    name:"journal"
    MDFloatLayout:
        md_bg_color : 190/255, 81/255, 217/255, 0.55
        MDFloatLayout:
            md_bg_color:1,1,1,1
            size_hint:1, 0.13
            pos_hint:{"center_y": 0.05}

        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.04, "center_y": 0.9}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "dashboard"

        MDIconButton:
            icon: "plus-circle-outline"
            theme_text_color: "Custom"
            text_color : 140/255, 35/255, 205/255, 1
            pos_hint: {"center_x": 0.5, "center_y":0.07}
            size: 0.2, 0.4
            on_release:
                root.manager.get_screen('journalentry').ids.title.text = ''
                root.manager.get_screen('journalentry').ids.entry.text = ''
                root.manager.transition.direction = "left"
                root.manager.current = "journalentry"
        Label:
            text: "New Entry"
            pos_hint: {"center_x": 0.5, "center_y":0.04}
            halign : "left"
            color: 0, 0, 0, 1
    ScrollView:
        size_hint_y: 0.77
        pos_hint:{"x": 0, "y": 0.116}
        do_scroll_x: False
        do_scroll_y: True
        BoxLayout:
            id:entrylist
            orientation: 'vertical'
            size:(root.width, root.height)
            height:self.minimum_height
            size_hint: None, None
            pos_hint: {"top":5}
            cols: 1
            spacing: 5
            padding: 16
            
            

<JournalEntry>:
    name : "journalentry"
    MDFloatLayout:
        md_bg_color : 190/255, 81/255, 217/255, 0.55
        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.04, "center_y": 0.9}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "journal"
    MDTextField:
        id: title
        hint_text: "Title"
        mode: "rectangle"
        line_color_focus : 140/255, 35/255, 205/255, 1
        pos_hint: {"center_x":0.54, "center_y":0.9}
        size_hint: 0.85, 0.09
    
    MDTextField:
        id: entry
        hint_text: "Entry"
        mode: "rectangle"
        line_color_focus : 140/255, 35/255, 205/255, 1
        pos_hint: {"center_x":0.51, "center_y":0.5}
        size_hint: 0.8, 0.6
        multiline: True

    MDFloatLayout:
        size_hint: 0.15, 0.08
        pos_hint :{"center_x":0.5, "center_y":0.1}
        canvas:
            Color:
                rgba: [140/255, 30/255, 205/255, 1]
            
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius : [25, 25, 25, 25]

        Button:
            id: save_entry
            text : ""
            background_color : 0, 0, 0, 0
            pos_hint :{"center_x": 0.5, "center_y": 0.1}
            on_press:root.save()
            
        MDLabel:
            text: "Save"
            halign : "center"
            pos_hint : {"center_x":0.5,"center_y":0.5}
            color: 0, 0, 0, 1
            font_name : "fonts\BarlowCondensed-Regular.ttf"
            font_size : "18sp"


<ChatBot>:
    name: "chat"
    MDFloatLayout:
        md_bg_color: 190/255, 81/255, 217/255, 0.55
        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.04, "center_y": 0.97}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "dashboard"
                root.clearchat()
        MDTextFieldRound:
            id: usertext
            hint_text: "Type your message"
            pos_hint: {"center_x": 0.45, "center_y": 0.09 }
            multiline: True
            size_hint: 0.8, 0.1
            normal_color: 0, 0, 0, 0
            cursor_color: 140/255, 35/255, 205/255, 1
            cursor_width: "2sp"
        MDIconButton:
            icon: "microphone"
            pos_hint: {"center_x": 0.85, "center_y":0.09}
            theme_text_color : "Custom"
            text_color: 140/255, 35/255, 205/255, 1
            user_font_size: "30sp"
            on_press: root.talk()
            on_release:root.stoptalk()
        MDIconButton:
            icon: 'send'
            pos_hint: {"center_x": 0.95, "center_y":0.09}
            theme_text_color: "Custom"
            text_color: 1,1,1,1
            md_bg_color: 140/255, 35/255, 205/255, 1
            user_font_size: "25sp"
            on_release: root.sendmess()
                       
    ScrollView:
        size_hint_y: 0.77
        pos_hint:{"x": 0, "y": 0.15}
        do_scroll_x: False
        do_scroll_y: True
        BoxLayout:
            id:chatbox
            orientation: 'vertical'
            size:(root.width, root.height)
            height:self.minimum_height
            size_hint: None, None
            pos_hint: {"top":5}
            cols: 1
            spacing: 5

<ChosenPlan>:
    name: "plans"
    MDFloatLayout:
        md_bg_color : 190/255, 81/255, 217/255, 0.55
        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.04, "center_y": 0.9}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "dashboard"
        
    ScrollView:
        size_hint_y: 0.85
        pos_hint:{"x": 0.1, "y": 0.05}
        do_scroll_x: False
        do_scroll_y: True
        GridLayout:
            id:aclist
            size:(root.width, root.height)
            height:self.minimum_height
            size_hint: None, None
            pos_hint: {"top":4}
            padding: 16
            spacing: 5
            cols: 3

<Progress>:
    name: "progress"
    MDFloatLayout:
        md_bg_color: 190/255, 81/255, 217/255, 0.55
        MDIconButton:
            icon: "keyboard-backspace"
            size: 0.2, 0.4
            pos_hint : {"center_x": 0.04, "center_y": 0.97}
            on_release:
                root.manager.transition.direction="right"
                root.manager.current = "plans" 
        MDLabel:
            id: title
            text: root.plan_title
    
    MDFloatLayout:
        size_hint: 0.15, 0.08
        pos_hint :{"center_x":0.5, "center_y":0.1}
        canvas:
            Color:
                rgba: [140/255, 30/255, 205/255, 1]
            
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius : [25, 25, 25, 25]

        Button:
            id: save
            text : ""
            background_color : 0, 0, 0, 0
            pos_hint :{"center_x": 0.5, "center_y": 0.1}
            on_press:root.complete()
            
        MDLabel:
            text: "Complete"
            halign : "center"
            pos_hint : {"center_x":0.5,"center_y":0.5}
            color: 0, 0, 0, 1
            font_name : "fonts\BarlowCondensed-Regular.ttf"
            font_size : "18sp"

    ScrollView:
        size_hint_y: 0.85
        pos_hint:{"x": 0.05, "y": 0.15}
        do_scroll_x: False
        do_scroll_y: True
        BoxLayout:
            id:exlist
            orientation: 'vertical'
            size:(root.width, root.height)
            height:self.minimum_height
            size_hint: None, None
            pos_hint: {"top":5}
            padding: 30
            spacing: 15
            cols: 1
           


<Entry>:
    padding: 16
    size_hint: None, None
    size: "600dp", "200dp"
    pos_hint:{"center_x": 0.5, "center_y": 0.8}

    canvas:
        Color:
            rgba: [110/255, 129/255, 200/255, 1]
        Rectangle:
            pos: self.pos
            size: self.size

    MDRelativeLayout:
        size_hint: None, None
        size: root.size

        MDIconButton:
            id: menubutton
            icon: "dots-vertical"
            pos:
                root.width - (self.width + root.padding[0] + dp(4)),root.height - (self.height + root.padding[0] + dp(4))
            on_release:
                root.open_menu()

        MDLabel:
            id: date
            text: root.text
            adaptive_size: True
            color: .2, .2, .2, .8

        MDLabel:
            id: title
            text: root.text1
            adaptive_size: True
            color: .2, .2, .2, .8
            pos_hint:{"y": 0.5}

<UserMessage>:
    text: root.text
    halign: "left"
    size_hint_y: None
    pos_hint:{"right": 0.98}
    text_size: self.width, None
    height: self.texture_size[1]
    theme_text_color: 'Custom'
    text_color: 0,0,0,1
    padding: 12, 10
    canvas.before:
        Color:
            rgba:[1,1,1,1]
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23,23,0,23]

<Response>:
    text: root.text
    halign:"left"
    size_hint: 0.4, None
    pos_hint:{"x": 0.02}
    text_size: self.width, None
    height: self.texture_size[1]
    theme_text_color: 'Custom'
    text_color: 1,1,1,1
    padding: 12, 10
    canvas.before:
        Color:
            rgba:[158/255,110/255,180/255,1]
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23,23,23,0]

<RecommendedPlans>:
    size_hint:None, None
    size: "200dp", "200dp"
    pos_hint:{"center_x": 0.5, "center_y": 0.8}
    radius: [15,15,15,15]
    focus_behavior: True
    elevation: 2
    padding: 5
    MDRelativeLayout:
        size_hint: None, None
        size: root.size
        Image:
            source: "images\medicon-removebg-preview.png"
            size_hint: 0.5, 0.5
            pos_hint:{"center_x":0.5, "center_y":0.7}
        MDSeparator:
            pos_hint:{"center_x":0.5, "center_y":0.45}
            height:'1dp'
            color: 191/255, 159/255, 64/255, 0.55
        MDLabel:
            id:title
            text: root.plan_title
            size_hint_y: None
            pos_hint:{"center_x":0.5, "center_y":0.4}
        MDLabel:
            id:num_exercises
            text: root.exercises
            size_hint_y: None
            pos_hint:{"center_x":0.5, "center_y":0.28}
            font_size: "12sp"
            color: 140/255, 35/255, 205/255, 1
        MDTextButton:
            text: "Choose Plan"
            color: 164/255, 118/255, 171/255, 1
            on_release: root.choose_plan()
            font_size:"12sp"
            pos_hint:{"center_x":0.7}

<ActivePlans>:
    size_hint:None, None
    size: "200dp", "200dp"
    pos_hint:{"center_x": 0.5, "center_y": 0.8}
    radius: [15,15,15,15]
    focus_behavior: True
    elevation: 2
    padding: 5
    MDRelativeLayout:
        size_hint: None, None
        size: root.size
        Image:
            source: "images\medicon-removebg-preview.png"
            size_hint: 0.5, 0.5
            pos_hint:{"center_x":0.5, "center_y":0.7}
        MDSeparator:
            pos_hint:{"center_x":0.5, "center_y":0.45}
            height:'1dp'
            color: 191/255, 159/255, 64/255, 0.55
        MDLabel:
            id:title
            text: root.plan_title
            size_hint_y: None
            pos_hint:{"center_x":0.5, "center_y":0.4}
        MDLabel:
            id:num_exercises
            text: root.exercises
            size_hint_y: None
            pos_hint:{"center_x":0.5, "center_y":0.28}
            font_size: "12sp"
            color: 140/255, 35/255, 205/255, 1
        MDIconButton:
            icon: "delete"
            user_font_size:"16sp"
            pos_hint:{"center_x":0.8}
            on_release: root.delete_plan()
        MDTextButton:
            text: "View"
            font_size:"12sp"
            color:164/255, 118/255, 171/255, 1
            pos_hint:{"center_x":0.1}
            on_release: root.view_exercises()


    
       
